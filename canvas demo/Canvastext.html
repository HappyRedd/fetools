<!DOCTYPE html>
<html>
    <head>
        <title>canvas demo</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
       <style>
      body{background-color:#ffffff;margin:0;padding:0;
        -webkit-touch-callout :none; -webkit-user-select: none;
    
        overflow: hidden;
        position: relative;
}
       </style>

    </head>
    <body>
        <canvas id="canvas"></canvas>
    <script >
        var tap= 'ontouchend' in window ? 'touchend' : 'click';
        //获取视口宽度：window.innerWidth/Height
        var vWidth = window.innerWidth;
        var vHeight = window.innerHeight;
        //获取canvas id
        var canvas = document.getElementById("canvas");
        //对canvas默认大小重置
        canvas.width =vWidth;
        canvas.height = vHeight;
        //get Context
        var ctx = canvas.getContext("2d");
        //rect view by RGBA
        function drawBg(ctx){
            ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
            ctx.fillRect (0, 0, vWidth, vHeight);
        }
        var ofont  = {
            size:30,
            left:200,
            top:300,
            w:null,
           left2:200,
           top2:200

        }
        var isOPos = false;


       function drawText(ctx){
        ctx.font=ofont.size;
        var txt="Hello World!"  
        ofont.w = ctx.measureText(txt).width;
        //console.log("aaa")
        if(isOPos===false){
            
             ctx.fillText(txt,ofont.left,ofont.top);
          
        }else{
           
             ctx.fillText(txt,ofont.left2,ofont.top2);
        }
       }
        window.onload = function(){
            drawBg(ctx);
            drawText(ctx);
            drawRoundedRect(ctx,'blue',   'yellow',  ofont.left,  ofont.top,  73,  30, 0);
            canvas.addEventListener(tap, function(event){
            getClientR(event);
            
            if((ofont.left<mtX)&&
            (mtX<ofont.left+ofont.w)&&
            (ofont.top-ofont.size/2<mtY)&&
            (mtY<ofont.top)){
               console.log(ofont.w)
               isOPos = true;
               ctx.clearRect(0,0,vWidth, vHeight);
               drawBg(ctx);
               drawText(ctx);
            }
            //console.log(ofont.size);
            // console.log(ofont.top);
            //console.log(mtY);
        });
        }
        
    </script>
    <script src="js/mt.js"></script>
    </body>
</html>
