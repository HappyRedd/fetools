/*!2014-07-25 14:19:52 @authors WFE_jackiejiang (jackiejiang@tencent.com) */
$(function(){function a(){$(".wrap").append('<div class="video"></div>');for(var a=0;m>a;a++)$(".video").append(10>a?'<img src="other/.0/images/video/001_0000'+a+'.jpg" />':'<img src="other/.0/images/video/001_000'+a+'.jpg" />');m>l&&(i=setInterval(function(){l++,$(".video img").eq(l).show().siblings().hide(),l==m&&(clearInterval(i),i=null,setTimeout(function(){$(".video").remove(),$(".p_btn,.yzIcon").fadeIn()},1e3))},70)),$(".wrap,.video,.screen,.layer,.channel,.channelWrap").width(j).height(k);var b=$(".layerWrap .layer").length,c=$(".main .channel").length,d=$(".main .tchannel").length;$(".layerWrap").width(j*b),$(".channelWrap").width(j*c).height(k),$(".tipschannel").width(j).height(k),$(".tchannelWrap").width(j*d).height(k),$(".tchannel").width(j).height(k),$(".screen").css({"-webkit-transform":"translate3d(-"+j+"px, 0px, 0px)"},2e3)}function b(){$(".ui-play-rbhp").addClass("fshpHover").off("click").find("p").text("正在演示..."),6>p&&p++,$(".dhgc-rbhp").find("img").attr("src","http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_0"+p+".gif"),setTimeout(function(){switch($(".ui-play-rbhp").removeClass("fshpHover").on("click",b),p){case 1:$(".rbhpdhCon .fshpNum em").text("2"),$(".rbhpdhCon .ui-play-rbhp p").text("装入炮弹");break;case 2:$(".rbhpdhCon .fshpNum em").text("3"),$(".rbhpdhCon .ui-play-rbhp p").text("装入发射药筒");break;case 3:$(".rbhpdhCon .fshpNum em").text("4"),$(".rbhpdhCon .ui-play-rbhp p").text("关上炮栓");break;case 4:$(".rbhpdhCon .fshpNum em").text("5"),$(".rbhpdhCon .ui-play-rbhp p").text("拉火，击发");break;case 5:$(".hpBtn").fadeIn(),$(".ui-play-rbhp").hide(),p=0,$(".rbhpdhCon .ui-play-rbhp p").text("打开炮栓"),$(".dhgc-rbhp").find("img").attr("src","http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_0"+p+".gif")}},2e3)}function c(){$(".ui-play-byhp").addClass("fshpHover").off("click").find("p").text("正在演示..."),10>q&&q++,$(".dhgc-byhp").find("img").attr("src","http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_0"+q+".gif"),setTimeout(function(){switch($(".ui-play-byhp").removeClass("fshpHover").on("click",c),q){case 1:$(".byhpdhCon .fshpNum em").text("2"),$(".byhpdhCon .ui-play-byhp p").text("清理炮膛");break;case 2:$(".byhpdhCon .fshpNum em").text("3"),$(".byhpdhCon .ui-play-byhp p").text("装入炮弹");break;case 3:$(".byhpdhCon .fshpNum em").text("4"),$(".byhpdhCon .ui-play-byhp p").text("装入发射药包");break;case 4:$(".byhpdhCon .fshpNum em").text("5"),$(".byhpdhCon .ui-play-byhp p").text("关上炮栓");break;case 5:$(".byhpdhCon .fshpNum em").text("6"),$(".byhpdhCon .ui-play-byhp p").text("刺穿发射药包");break;case 6:$(".byhpdhCon .fshpNum em").text("7"),$(".byhpdhCon .ui-play-byhp p").text("装上发火信管");break;case 7:$(".byhpdhCon .fshpNum em").text("8"),$(".byhpdhCon .ui-play-byhp p").text("拉火，击发");break;case 8:$(".byhpdhCon .fshpNum em").text("9"),$(".byhpdhCon .ui-play-byhp p").text("拖动火炮复位");break;case 9:$(".hpBtn").fadeIn(),$(".ui-play-byhp").hide(),q=0,$(".byhpdhCon .ui-play-byhp p").text("打开炮栓"),$(".dhgc-byhp").find("img").attr("src","http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_0"+q+".gif")}},2e3)}function d(){0==r?$(".tipschannel .leftBtn").hide():$(".tipschannel .leftBtn").show(),r==s-1?$(".tipschannel .rightBtn").hide():$(".tipschannel .rightBtn").show()}function e(a){function b(a){k[a].onload=function(){c.call(this,"load",a)},k[a].onerror=function(){c.call(this,"error",a)},k[a].onabort=function(){c.call(this,"abort",a)},k[a].src=""+h[a]}function c(b,c){switch(l.currentIndex=c,b){case"load":this.onload=null,this.loaded=!0,l.load++,f(a.onload)&&a.onload.call(this,l);break;case"error":l.error++,f(a.onerror)&&a.onerror.call(this,l);break;case"abort":l.abort++}l.complete++,f(a.oncomplete)&&a.oncomplete.call(this,l),l.complete===k.length&&d()}function d(){clearTimeout(j),f(a.complete)&&a.complete.call({},k,l)}function f(a){return"[object Function]"===i.apply(a)}var g,h=[],i=Object.prototype.toString;switch(i.apply(a.url)){case"[object String]":h[h.length]=a.url;break;case"[object Array]":if(!a.url.length)return!1;h=a.url;break;case"[object Function]":return a.url=a.url(),e(a);default:return!1}var j,k=[],l={total:h.length,load:0,error:0,abort:0,complete:0,currentIndex:0},m={url:"",onload:"function",onerror:"function",oncomplete:"function",ready:"function",complete:"function",timeout:15};for(var n in m)a[n]=a[n]===g?m[n]:a[n];a.timeout=parseInt(a.timeout)||m.timeout,j=setTimeout(d,1e3*a.timeout);for(var o,p=0,q=h.length;q>p;p++)o=new Image,o.loaded=!1,k[k.length]=o;for(p=0,q=k.length;q>p;p++)b(p);return f(a.ready)&&a.ready.call({},k,l),!0}function f(a){jQuery(".loading .inner").css({width:a+"%"}),jQuery(".numP").html(a+"%")}function g(a){t?a>100?setTimeout(h,200):(f(a),timer=setTimeout(function(){g(++a)},100)):100>a?(f(a),setTimeout(function(){g(++a)},240)):setTimeout(h,200)}function h(){$(document).ready(function(){$(".loadPage").animate({opacity:"0"},"100","linear",function(){$(".loadPage").css({display:"none"})}),a()})}for(var i,j=$(window).width(),k=$(window).height(),l=0,m=41,n=[],o=0;m>o;o++)n.push(10>o?"other/.0/images/video/001_0000"+o+".jpg":"other/.0/images/video/001_000"+o+".jpg");$(".p_btn a").on("click",function(){var a=$(this).index();0==a?($(".screen").css({"-webkit-transform":"translate3d(-"+2*j+"px, 0px, 0px)"},2e3),$(".channel").eq(a).addClass("curChannel"),$(".toolbar li").eq(a).addClass("hover").siblings().removeClass("hover")):($(".screen").css({"-webkit-transform":"translate3d(0px, 0px, 0px)"},2e3),$(".layer").eq(0).addClass("layerHover"),e({url:function(a){return a=[],a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_00.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_01.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_02.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_03.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_04.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_05.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_00.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_01.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_02.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_03.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_04.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_05.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_06.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_07.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_08.gif"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_09.gif"),a},oncomplete:function(){},complete:function(){t=!0}}))}),$(".toolbar li").each(function(){var a=$(this).index();$(this).on("click",function(){$(this).addClass("hover").siblings().removeClass("hover"),$(".channelWrap .channel").eq(a).addClass("curChannel").siblings().removeClass("curChannel"),$(".channelWrap").css({"-webkit-transform":"translate3d(-"+j*a+"px, 0px, 0px)"},2e3),4==a?$(".tipsBg,.tipstxt").show():$(".channel").removeClass("kp")})}),$(".return").on("click",function(){$(".screen").css({"-webkit-transform":"translate3d(-"+j+"px, 0px, 0px)"},2e3),$(".channelWrap").css({"-webkit-transform":"translate3d(0px, 0px, 0px)"},2e3),$(".channel").removeClass("curChannel"),$(".layer").removeClass("layerHover")}),$(".tipsBg,.tipstxt").on("click",function(){$(".tipsBg,.tipstxt").hide()});var p=0;$(".ui-playAgin-rbhp").on("click",function(){p=0,$(".rbhpdhCon .fshpNum em").text("1"),$(".rbhpdhCon .ui-play-rbhp p").text("打开炮栓"),$(".dhgc-rbhp").find("img").attr("src","http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/rbdh_00.gif"),$(this).parent(".hpBtn").hide(),$(".ui-play-rbhp").fadeIn()});var q=0;$(".ui-playAgin-byhp").on("click",function(){q=0,$(".byhpdhCon .fshpNum em").text("1"),$(".byhpdhCon .ui-play-byhp p").text("打开炮栓"),$(".dhgc-byhp").find("img").attr("src","http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bydh_00.gif"),$(this).parent(".hpBtn").hide(),$(".ui-play-byhp").fadeIn()}),$(".ui-play-byhp").on("click",c),$(".ui-play-rbhp").on("click",b),$(".byjdBtn").on("click",function(){$(".byhpdhCon").show().css({top:"0px"})}),$(".rbjdBtn").on("click",function(){$(".rbhpdhCon").show().css({top:"0px"})}),$(".goback").on("click",function(){$(".byhpdhCon,.rbhpdhCon").css({top:"-1999px"}),$(".fshpNum em").text(1),$(".fshp").show(),$(".hpBtn").hide()}),$(".zdwXq").on("click",function(){$(".tipschannel").css({display:"block",top:"50%",scale:.5,opacity:0,rotateX:"0deg"}).transition({top:"0%",scale:.85,opacity:1,rotateX:"-5deg"},750,"easeOutQuint").transition({rotateX:"0deg",scale:1},750,"easeOutQuint",function(){})}),$(".tipschannel .closeBtn").on("click",function(){$(".tipschannel").css({display:"block"}).transition({rotateX:"-5deg",scale:.75,top:"40%"},200,"easeOutQuint").transition({rotateX:"0deg",top:"100%"},400,"easeOutQuint",function(){$(this).hide()})});var r=0,s=$(".tipschannel .tchannel").length;d(),$(".tipschannel .leftBtn").on("click",function(){r>0&&r--,d(),$(".tchannelWrap").css({"-webkit-transform":"translate3d(-"+j*r+"px, 0px, 0px)"})}),$(".tipschannel .rightBtn").on("click",function(){s-1>r&&r++,d(),$(".tchannelWrap").css({"-webkit-transform":"translate3d(-"+j*r+"px, 0px, 0px)"})}),e({url:function(a){return a=[],a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/loading.png"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/index.png"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bg_index.jpg"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bg_main.jpg"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bg_tips.png"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/bg_toolbar.png"),a.push("http://mat1.gtimg.com/joke/wef/tpl/jiawu/1.1.0/images/tipsTitle.png"),a=n.concat(),n.length=0,a},oncomplete:function(){},complete:function(){t=!0}});var t=!1;setTimeout(function(){g(0)},2e3);var u=function(){var a=shareConfig.title,b=shareConfig.desc;WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",{img_url:shareConfig.pic,img_width:"120",img_height:"120",link:document.location.href,desc:b,title:a},function(){})}),WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{img_url:shareConfig.pic,link:document.location.href,desc:b,title:a},function(){})}),WeixinJSBridge.on("menu:share:weibo",function(){WeixinJSBridge.invoke("shareWeibo",{desc:b,url:document.location.href},function(){})})};$(function(){document.addEventListener?document.addEventListener("WeixinJSBridgeReady",u,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",u),document.attachEvent("onWeixinJSBridgeReady",u))});var v=function(){var a=navigator.userAgent.toLowerCase();return{ipad:/ipad/.test(a),iphone:/iphone/.test(a),android:/android/.test(a),qqnews:/qqnews/.test(a),weixin:/micromessenger/.test(a)}},w=v();w.qqnews&&$(".toolbar,.toolbarBg").css({bottom:"40px"})});/*  |xGv00|41ee17d9c863b15b4fd9f327784025bc */